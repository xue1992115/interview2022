<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- 
        1、常见的闭包
        * 将函数作为另一个函数的返回值
        * 将函数作为实参传递给另外一个函数
        * 产生闭包的数量 嵌套的函数内定义了几个就是几个
        2、闭包的作用
        * 使用函数内部的变量，在函数执行完之后，仍然存活在内存中
        * 突破作用域链，让函数外部可以访问到函数内部的变量/方法
        3、闭包的生命周期
        * 产生：在嵌套的函数内部定义的执行完就产生了闭包，不要闭包函数的执行
        * 死亡：在嵌套的函数内部称为垃圾对象的时候 f = null成为垃圾对象
        4、闭包的应用
        * 定义js模块（js模块就时具有特定功能的文件）
        * 封装变量，通过闭包暴露出可以操作变量的方法或者对象
        5、闭包的缺点
        * 缺点
            * 函数执行完成之后，内部的变量没有释放，延长了在内存的时间
            * 导致内存泄露
        * 解决方法
            * 能不使用就不使用
            * 及时释放 设置成垃圾对象
     -->
    <script>
      function f1() {
        var a = 1;
        return function f2() {
          console.log(a++);
        };
      }
      var f3 = f1();
      f3(); // 1
      f3(); // 2
      f3(); // 3
      f3(); // 4

      function show() {
        var a = 100;
        setTimeout(() => {
          console.log(a);
        }, 1000);
      }
      show();
    </script>
  </body>
</html>
